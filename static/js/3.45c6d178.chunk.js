(this["webpackJsonpsocial-network-typescript"]=this["webpackJsonpsocial-network-typescript"]||[]).push([[3],{100:function(e,t,n){e.exports={posts:"MyPosts_posts__2YdkN",myPosts:"MyPosts_myPosts__3WChl"}},101:function(e,t,n){e.exports={item:"Post_item__VCfZb",avatar:"Post_avatar__3b1mL"}},102:function(e,t,n){e.exports={error:"AddPostForm_error__1c5D7"}},103:function(e,t,n){e.exports={backgroundImg:"ProfileInfo_backgroundImg__zDJmk",wrapper:"ProfileInfo_wrapper__3JRwj",name:"ProfileInfo_name__1Y5Jv",avatar:"ProfileInfo_avatar__yMIdP",description:"ProfileInfo_description__35rkD",avatarBlock:"ProfileInfo_avatarBlock__2aLem",btn:"ProfileInfo_btn__1UQqq"}},104:function(e,t,n){e.exports={link:"Contact_link__12Nfs"}},105:function(e,t,n){e.exports={wrapper:"ProfileDataForm_wrapper__2UjCh",red:"ProfileDataForm_red__u4ORM"}},106:function(e,t,n){e.exports={wrapper:"ProfileData_wrapper__2IhT1",description:"ProfileData_description__3gUcb",name:"ProfileData_name__3ytuh"}},109:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(10),c=n(3),i=n(9),o=n(100),u=n.n(o),l=n(101),d=n.n(l),j=n(1),b=s.a.memo((function(e){return Object(j.jsxs)("div",{className:d.a.item,children:[Object(j.jsx)("img",{className:d.a.avatar,src:e.img,alt:"avatar"}),Object(j.jsx)("span",{children:e.message}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["likes: ",e.likesCount]})})]},e.id)})),p=n(13),f=n(102),h=n.n(f),O=function(e){return Object(j.jsx)(p.d,{initialValues:{post:""},onSubmit:function(t,n){var a=n.setSubmitting,s=n.resetForm;e.onSubmit(t.post),s({values:{post:""}}),a(!1)},validate:function(e){var t={};return e.post?e.post.length>50&&(t.post="Max Length is 50 symbols"):t.post="Field is required",t},children:Object(j.jsxs)(p.c,{children:[Object(j.jsx)(p.b,{name:"post",component:"textarea",placeholder:"add Post..."}),Object(j.jsx)("button",{type:"submit",children:"Add"}),Object(j.jsx)(p.a,{name:"post",component:"div",className:h.a.error})]})})},x=n(11),m=n.n(x),v=n(17),g=n(41),k=n(23),_=function(e){return{type:g.a,newPostText:e}},P=function(e){return{type:g.c,status:e}},w=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.b.getProfile(e);case 3:a=t.sent,n((s=a.data,{type:g.d,userInfo:s})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}var s}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},y=s.a.memo((function(e){var t=Object(i.c)();return Object(j.jsxs)("div",{className:u.a.myPosts,children:[Object(j.jsx)("h3",{children:"My posts"}),Object(j.jsx)(O,{onSubmit:function(e){t(_(e))}}),Object(j.jsx)("div",{className:u.a.posts,children:e.posts.map((function(e){return Object(j.jsx)(b,{message:e.message,likesCount:e.likesCount,img:e.img,id:e.id},e.id)}))})]})})),M=Object(i.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(_(t))}}}))(y),N=n(19),C=n(103),S=n.n(C),F=n(36),I=n(95),D=n(22),J=n(2),A=n(38),E=n(39),U=n(44),V=n(43),B=function(e){Object(U.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(A.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={editMode:!1,statusValue:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.handleProfileStatusUpdate&&e.props.handleProfileStatusUpdate(e.state.statusValue)},e.handleChange=function(t){e.setState({statusValue:t.currentTarget.value})},e}return Object(E.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({statusValue:this.props.status})}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:this.state.editMode?Object(j.jsx)("input",{type:"text",value:this.state.statusValue,autoFocus:!0,onBlur:this.deactivateEditMode,onChange:this.handleChange}):Object(j.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"Dont have status yet"})})}}]),n}(s.a.PureComponent),q=n(104),L=n.n(q),T=function(e){var t=e.name,n=e.value,a=e.isEditModeOn,s=e.fieldName,r=e.formik;return Object(j.jsx)("div",{children:a&&r?Object(j.jsxs)("h4",{children:[s,":",Object(j.jsx)("input",Object(J.a)({},r.getFieldProps(t)))]}):Object(j.jsx)(D.a,{className:L.a.link,children:Object(j.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:t})})})},R=n(105),Y=n.n(R),z=Object(a.memo)((function(e){var t=e.userInfo,n=e.status,a=e.handleProfileStatusUpdate,s=e.isEditModeOn,r=e.onEditProfileClick,c=t.fullName,o=t.lookingForAJobDescription,u=t.aboutMe,l=t.contacts,d=t.lookingForAJob,b=t.userId,f=Object(i.c)(),h=Object(p.e)({initialValues:{lookingForAJob:d,fullName:c,aboutMe:u,contacts:l,lookingForAJobDescription:o,userId:b},onSubmit:function(e){var t;f((t=e,function(){var e=Object(v.a)(m.a.mark((function e(n,a){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=a().auth.id,e.next=4,k.b.updateProfile(t);case 4:0===e.sent.data.resultCode&&s&&n(w(s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())),r(),h.resetForm()}});return Object(j.jsxs)("div",{className:Y.a.wrapper,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)("b",{children:"status: "})}),Object(j.jsx)(B,{status:n,handleProfileStatusUpdate:a})]}),Object(j.jsxs)("form",{onSubmit:h.handleSubmit,children:[Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["fullName:",Object(j.jsx)("input",Object(J.a)({},h.getFieldProps("fullName")))]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["aboutMe",Object(j.jsx)("b",{className:Y.a.red,children:"*"}),":",Object(j.jsx)("input",Object(J.a)({},h.getFieldProps("aboutMe")))]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["lookingForAJob:",Object(j.jsx)("input",{type:"checkbox",name:"lookingForAJob",onChange:h.handleChange,checked:h.values.lookingForAJob})]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["lookingForAJobDescription",Object(j.jsx)("b",{className:Y.a.red,children:"*"}),":",Object(j.jsx)("input",Object(J.a)({},h.getFieldProps("lookingForAJobDescription")))]})}),Object(j.jsx)("div",{children:Object.keys(l).map((function(e){var t=l[e];return Object(j.jsx)(T,{name:"contacts."+e,fieldName:e,value:t,isEditModeOn:s,formik:h},e)}))}),Object(j.jsx)(D.a,{type:"submit",children:"Save changes"})]})]})})),Q=n(106),W=n.n(Q),Z=Object(a.memo)((function(e){var t=e.userInfo,n=e.handleProfileStatusUpdate,a=e.status,s=e.isEditModeOn,r=t.fullName,c=t.lookingForAJobDescription,i=t.aboutMe,o=t.contacts,u=t.lookingForAJob;return Object(j.jsxs)("div",{className:W.a.wrapper,children:[Object(j.jsx)("div",{className:W.a.name,children:Object(j.jsx)("h3",{children:r})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)("b",{children:"status: "})}),Object(j.jsx)(B,{status:a,handleProfileStatusUpdate:n})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["aboutMe: ",Object(j.jsx)("span",{className:W.a.description,children:i})]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["lookingForAJob: ",Object(j.jsx)("span",{className:W.a.description,children:u?"yes":"no"})]})}),u&&Object(j.jsx)("div",{children:Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["Description: ",Object(j.jsx)("span",{className:W.a.description,children:c})]})})}),Object(j.jsx)("div",{children:Object.keys(o).map((function(e){var t=o[e];return null!==t&&Object(j.jsx)(T,{name:e,value:t,isEditModeOn:s},e)}))})]})})),G=s.a.memo((function(e){var t=e.userInfo,n=e.status,s=e.savePhoto,r=e.isProfileOwner,c=e.handleProfileStatusUpdate,i=t.photos,o=Object(a.useState)(!1),u=Object(N.a)(o,2),l=u[0],d=u[1],b=Object(a.useCallback)((function(){d(!l)}),[l]),p=i.small||I.a;return t?Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:S.a.wrapper,children:[Object(j.jsxs)("div",{className:S.a.avatarBlock,children:[Object(j.jsx)("img",{className:S.a.avatar,src:p,alt:"avatar"}),l&&Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:"Change photo"}),Object(j.jsx)("input",{type:"file",name:"file",accept:"image/png, image/gif, image/jpeg",onChange:function(e){null!==e.target.files&&s(e.target.files[0])}})]}),r&&Object(j.jsx)(D.a,{onClick:b,className:S.a.btn,children:"Edit Profile"})]}),l?Object(j.jsx)(z,{userInfo:t,handleProfileStatusUpdate:c,status:n,isEditModeOn:l,onEditProfileClick:b}):Object(j.jsx)(Z,{handleProfileStatusUpdate:c,status:n,userInfo:t,isEditModeOn:l})]})}):Object(j.jsx)(F.a,{})}));t.default=function(){var e=Object(r.a)((function(e){return e.profilePage.userInfo})),t=Object(r.a)((function(e){return e.auth.id})),n=Object(r.a)((function(e){return e.profilePage.status})),s=Object(i.c)(),o=Object(c.h)().userId,u=!!o&&t===+o;Object(a.useEffect)((function(){o&&(s(w(+o)),s(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.b.getProfileStatus(e);case 3:a=t.sent,n(P(a.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(+o)))}),[s,o]);var l=Object(a.useCallback)((function(e){o&&s(function(e,t){return function(){var n=Object(v.a)(m.a.mark((function n(a){var s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.b.setProfileImage(e);case 3:0===(s=n.sent).data.resultCode&&(a((r=s.data,{type:g.b,photos:r})),a(w(t))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.warn(n.t0);case 10:case"end":return n.stop()}var r}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(e,+o))}),[s,o]),d=Object(a.useCallback)((function(e){o&&t===+o&&s(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.b.updateProfileStatus(e);case 3:0===t.sent.data.resultCode&&n(P(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[s,t,o]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(G,{savePhoto:l,isProfileOwner:u,userInfo:e,status:n,handleProfileStatusUpdate:d}),Object(j.jsx)(M,{})]})}},95:function(e,t,n){"use strict";t.a=n.p+"static/media/user-avatar.2ca07d6b.webp"}}]);
//# sourceMappingURL=3.45c6d178.chunk.js.map