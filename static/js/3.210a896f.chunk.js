(this["webpackJsonpsocial-network-typescript"]=this["webpackJsonpsocial-network-typescript"]||[]).push([[3],{100:function(e,t,a){e.exports={posts:"MyPosts_posts__2YdkN",myPosts:"MyPosts_myPosts__3WChl"}},101:function(e,t,a){e.exports={item:"Post_item__VCfZb",avatar:"Post_avatar__3b1mL"}},102:function(e,t,a){e.exports={error:"AddPostForm_error__1c5D7",form:"AddPostForm_form__2T9gk",textarea:"AddPostForm_textarea__3vReY",btn:"AddPostForm_btn__3oRpQ"}},103:function(e,t,a){e.exports={backgroundImg:"ProfileInfo_backgroundImg__zDJmk",wrapper:"ProfileInfo_wrapper__3JRwj",name:"ProfileInfo_name__1Y5Jv",avatar:"ProfileInfo_avatar__yMIdP",description:"ProfileInfo_description__35rkD",avatarBlock:"ProfileInfo_avatarBlock__2aLem",btn:"ProfileInfo_btn__1UQqq"}},104:function(e,t,a){e.exports={link:"Contact_link__12Nfs"}},105:function(e,t,a){e.exports={wrapper:"ProfileDataForm_wrapper__2UjCh",red:"ProfileDataForm_red__u4ORM"}},106:function(e,t,a){e.exports={wrapper:"ProfileData_wrapper__2IhT1",description:"ProfileData_description__3gUcb",name:"ProfileData_name__3ytuh"}},109:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(10),c=a(3),i=a(9),o=a(100),l=a.n(o),u=a(101),d=a.n(u),j=a(1),b=s.a.memo((function(e){return Object(j.jsxs)("div",{className:d.a.item,children:[Object(j.jsx)("img",{className:d.a.avatar,src:e.img,alt:"avatar"}),Object(j.jsx)("span",{children:e.message}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["likes: ",e.likesCount]})})]},e.id)})),p=a(13),f=a(102),h=a.n(f),O=a(22),m=function(e){return Object(j.jsx)(p.d,{initialValues:{post:""},onSubmit:function(t,a){var n=a.setSubmitting,s=a.resetForm;e.onSubmit(t.post),s({values:{post:""}}),n(!1)},validate:function(e){var t={};return e.post?e.post.length>50&&(t.post="Max Length is 50 symbols"):t.post="Field is required",t},children:Object(j.jsxs)(p.c,{className:h.a.form,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(p.b,{className:h.a.textarea,name:"post",type:"text",component:"textarea",placeholder:"add Post..."}),Object(j.jsx)(p.a,{name:"post",component:"div",className:h.a.error})]}),Object(j.jsx)(O.a,{className:h.a.btn,type:"submit",children:"Add"})]})})},x=a(11),v=a.n(x),_=a(17),g=a(41),k=a(23),P=function(e){return{type:g.a,newPostText:e}},w=function(e){return{type:g.c,status:e}},y=function(e){return function(){var t=Object(_.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.b.getProfile(e);case 3:n=t.sent,a((s=n.data,{type:g.d,userInfo:s})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}var s}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},N=s.a.memo((function(e){var t=Object(i.c)();return Object(j.jsxs)("div",{className:l.a.myPosts,children:[Object(j.jsx)("h3",{children:"My posts"}),Object(j.jsx)(m,{onSubmit:function(e){t(P(e))}}),Object(j.jsx)("div",{className:l.a.posts,children:e.posts.map((function(e){return Object(j.jsx)(b,{message:e.message,likesCount:e.likesCount,img:e.img,id:e.id},e.id)}))})]})})),F=Object(i.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(P(t))}}}))(N),M=a(19),C=a(103),S=a.n(C),I=a(36),A=a(95),D=a(2),J=a(38),E=a(39),U=a(44),V=a(43),B=function(e){Object(U.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(J.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={editMode:!1,statusValue:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.handleProfileStatusUpdate&&e.props.handleProfileStatusUpdate(e.state.statusValue)},e.handleChange=function(t){e.setState({statusValue:t.currentTarget.value})},e}return Object(E.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({statusValue:this.props.status})}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:this.state.editMode?Object(j.jsx)("input",{type:"text",value:this.state.statusValue,autoFocus:!0,onBlur:this.deactivateEditMode,onChange:this.handleChange}):Object(j.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"Dont have status yet"})})}}]),a}(s.a.PureComponent),R=a(104),T=a.n(R),q=function(e){var t=e.name,a=e.value,n=e.isEditModeOn,s=e.fieldName,r=e.formik;return Object(j.jsx)("div",{children:n&&r?Object(j.jsxs)("h4",{children:[s,":",Object(j.jsx)("input",Object(D.a)({},r.getFieldProps(t)))]}):Object(j.jsx)(O.a,{className:T.a.link,children:Object(j.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",children:t})})})},L=a(105),Y=a.n(L),Q=Object(n.memo)((function(e){var t=e.userInfo,a=e.status,n=e.handleProfileStatusUpdate,s=e.isEditModeOn,r=e.onEditProfileClick,c=t.fullName,o=t.lookingForAJobDescription,l=t.aboutMe,u=t.contacts,d=t.lookingForAJob,b=t.userId,f=Object(i.c)(),h=Object(p.e)({initialValues:{lookingForAJob:d,fullName:c,aboutMe:l,contacts:u,lookingForAJobDescription:o,userId:b},onSubmit:function(e){var t;f((t=e,function(){var e=Object(_.a)(v.a.mark((function e(a,n){var s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=n().auth.id,e.next=4,k.b.updateProfile(t);case 4:0===e.sent.data.resultCode&&s&&a(y(s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}())),r(),h.resetForm()}});return Object(j.jsxs)("div",{className:Y.a.wrapper,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)("b",{children:"status: "})}),Object(j.jsx)(B,{status:a,handleProfileStatusUpdate:n})]}),Object(j.jsxs)("form",{onSubmit:h.handleSubmit,children:[Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["fullName:",Object(j.jsx)("input",Object(D.a)({},h.getFieldProps("fullName")))]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["aboutMe",Object(j.jsx)("b",{className:Y.a.red,children:"*"}),":",Object(j.jsx)("input",Object(D.a)({},h.getFieldProps("aboutMe")))]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["lookingForAJob:",Object(j.jsx)("input",{type:"checkbox",name:"lookingForAJob",onChange:h.handleChange,checked:h.values.lookingForAJob})]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["lookingForAJobDescription",Object(j.jsx)("b",{className:Y.a.red,children:"*"}),":",Object(j.jsx)("input",Object(D.a)({},h.getFieldProps("lookingForAJobDescription")))]})}),Object(j.jsx)("div",{children:Object.keys(u).map((function(e){var t=u[e];return Object(j.jsx)(q,{name:"contacts."+e,fieldName:e,value:t,isEditModeOn:s,formik:h},e)}))}),Object(j.jsx)(O.a,{type:"submit",children:"Save changes"})]})]})})),z=a(106),W=a.n(z),Z=Object(n.memo)((function(e){var t=e.userInfo,a=e.handleProfileStatusUpdate,n=e.status,s=e.isEditModeOn,r=t.fullName,c=t.lookingForAJobDescription,i=t.aboutMe,o=t.contacts,l=t.lookingForAJob;return Object(j.jsxs)("div",{className:W.a.wrapper,children:[Object(j.jsx)("div",{className:W.a.name,children:Object(j.jsx)("h3",{children:r})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)("b",{children:"status: "})}),Object(j.jsx)(B,{status:n,handleProfileStatusUpdate:a})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["aboutMe: ",Object(j.jsx)("span",{className:W.a.description,children:i})]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["lookingForAJob: ",Object(j.jsx)("span",{className:W.a.description,children:l?"yes":"no"})]})}),l&&Object(j.jsx)("div",{children:Object(j.jsx)("div",{children:Object(j.jsxs)("h4",{children:["Description: ",Object(j.jsx)("span",{className:W.a.description,children:c})]})})}),Object(j.jsx)("div",{children:Object.keys(o).map((function(e){var t=o[e];return null!==t&&Object(j.jsx)(q,{name:e,value:t,isEditModeOn:s},e)}))})]})})),G=s.a.memo((function(e){var t=e.userInfo,a=e.status,s=e.savePhoto,r=e.isProfileOwner,c=e.handleProfileStatusUpdate,i=t.photos,o=Object(n.useState)(!1),l=Object(M.a)(o,2),u=l[0],d=l[1],b=Object(n.useCallback)((function(){d(!u)}),[u]),p=i.small||A.a;return t?Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:S.a.wrapper,children:[Object(j.jsxs)("div",{className:S.a.avatarBlock,children:[Object(j.jsx)("img",{className:S.a.avatar,src:p,alt:"avatar"}),u&&Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:"Change photo"}),Object(j.jsx)("input",{type:"file",name:"file",accept:"image/png, image/gif, image/jpeg",onChange:function(e){null!==e.target.files&&s(e.target.files[0])}})]}),r&&Object(j.jsx)(O.a,{onClick:b,className:S.a.btn,children:"Edit Profile"})]}),u?Object(j.jsx)(Q,{userInfo:t,handleProfileStatusUpdate:c,status:a,isEditModeOn:u,onEditProfileClick:b}):Object(j.jsx)(Z,{handleProfileStatusUpdate:c,status:a,userInfo:t,isEditModeOn:u})]})}):Object(j.jsx)(I.a,{})}));t.default=function(){var e=Object(r.a)((function(e){return e.profilePage.userInfo})),t=Object(r.a)((function(e){return e.auth.id})),a=Object(r.a)((function(e){return e.profilePage.status})),s=Object(i.c)(),o=Object(c.h)().userId,l=!!o&&t===+o;Object(n.useEffect)((function(){o&&(s(y(+o)),s(function(e){return function(){var t=Object(_.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.b.getProfileStatus(e);case 3:n=t.sent,a(w(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(+o)))}),[s,o]);var u=Object(n.useCallback)((function(e){o&&s(function(e,t){return function(){var a=Object(_.a)(v.a.mark((function a(n){var s;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.b.setProfileImage(e);case 3:0===(s=a.sent).data.resultCode&&(n((r=s.data,{type:g.b,photos:r})),n(y(t))),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.warn(a.t0);case 10:case"end":return a.stop()}var r}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(e,+o))}),[s,o]),d=Object(n.useCallback)((function(e){o&&t===+o&&s(function(e){return function(){var t=Object(_.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.b.updateProfileStatus(e);case 3:0===t.sent.data.resultCode&&a(w(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[s,t,o]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(G,{savePhoto:u,isProfileOwner:l,userInfo:e,status:a,handleProfileStatusUpdate:d}),Object(j.jsx)(F,{})]})}},95:function(e,t,a){"use strict";t.a=a.p+"static/media/user-avatar.2ca07d6b.webp"}}]);
//# sourceMappingURL=3.210a896f.chunk.js.map